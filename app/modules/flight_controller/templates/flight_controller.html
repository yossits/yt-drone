{% extends "base.html" %} {% block title %}YT-Drone{% endblock %} {% block content %}

<div class="grid grid-2">
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Flight Controller</h3>
    </div>
    <div class="card-body">
      <div class="form-container">

        <!-- Connection Type -->
        <div class="form-group">
          <label class="form-label">Connection Type</label>
          <select class="form-select" id="fc-connection-type">
            <option value="serial">Serial connection</option>
            <option value="usb">USB connection</option>
          </select>
        </div>

        <!-- Baud Rate -->
        <div class="form-group">
          <label class="form-label">Baud Rate</label>
          <select class="form-select" id="fc-baud-select">
            <option value="9600">9600</option>
            <option value="57600" selected>57600</option>
            <option value="115200">115200</option>
          </select>
          <p style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">Default baudrate is 57600</p>
        </div>

      </div>

      <!-- Buttons -->
      <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-lg);">
        <button class="btn btn-warning" id="fc-connect-restart-btn">
          Connect
        </button>
        <button class="btn btn-danger" id="fc-disconnect-btn">
          Disconnect
        </button>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Mavlink Inspector</h3>
    </div>
    <div class="card-body">
      <!-- Content when Heartbeat is ACTIVE -->
      <div id="fc-content-with-heartbeat" style="display: none;">
        <!-- Status Messages -->
        <div id="fc-status-messages" style="margin-top: 1rem; display: none;">
          <h4 style="font-size: 1em; margin-bottom: 0.5rem; color: var(--text-primary);">Status Messages</h4>
          <div id="fc-status-messages-content" style="background: #000000; color: #ffffff; padding: 0.75rem; border-radius: 4px; font-family: monospace; font-size: 0.85em; max-height: 300px; overflow-y: auto;"></div>
        </div>
        
        <!-- Telemetry Messages -->
        <div id="fc-telemetry-messages" style="margin-top: 1rem; display: none;">
          <h4 style="font-size: 1em; margin-bottom: 0.5rem; color: var(--text-primary);">Telemetry Messages</h4>
          <div id="fc-telemetry-messages-content" style="background: #000000; color: #ffffff; padding: 0.75rem; border-radius: 4px; font-family: monospace; font-size: 0.85em; max-height: 300px; overflow-y: auto;"></div>
        </div>
        
        <!-- Sensors Messages -->
        <div id="fc-sensors-messages" style="margin-top: 1rem; display: none;">
          <h4 style="font-size: 1em; margin-bottom: 0.5rem; color: var(--text-primary);">Sensors Messages</h4>
          <div id="fc-sensors-messages-content" style="background: #000000; color: #ffffff; padding: 0.75rem; border-radius: 4px; font-family: monospace; font-size: 0.85em; max-height: 300px; overflow-y: auto;"></div>
        </div>
        
        <!-- Map Messages -->
        <div id="fc-map-messages" style="margin-top: 1rem; display: none;">
          <h4 style="font-size: 1em; margin-bottom: 0.5rem; color: var(--text-primary);">Map/GPS Messages</h4>
          <div id="fc-map-messages-content" style="background: #000000; color: #ffffff; padding: 0.75rem; border-radius: 4px; font-family: monospace; font-size: 0.85em; max-height: 300px; overflow-y: auto;"></div>
        </div>
      </div>
      
      <!-- Content when Heartbeat is INACTIVE -->
      <div id="fc-content-no-heartbeat" style="margin-top: 1rem;">
        <div style="padding: 1.5rem; background: var(--card-bg); border-radius: 4px; border: 2px solid var(--progress-danger);">
          <h4 style="font-size: 1.1em; margin-bottom: 1rem; color: var(--text-primary);">Detailed Connection Status</h4>
          <div id="fc-connection-details" style="color: var(--text-secondary);">
            <p style="margin-bottom: 0.5rem;"><strong>Connection Status:</strong> <span id="fc-detail-connection-status">Not Connected</span></p>
            <p style="margin-bottom: 0.5rem;"><strong>Last Heartbeat:</strong> <span id="fc-detail-last-heartbeat">Never Received</span></p>
            <p style="margin-bottom: 0.5rem;"><strong>Time Since Last Heartbeat:</strong> <span id="fc-detail-time-since-heartbeat">-</span></p>
            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
              <p style="font-size: 0.9em; margin-bottom: 0.5rem;"><strong>Instructions:</strong></p>
              <ul style="font-size: 0.85em; margin-left: 1.5rem; color: var(--text-secondary);">
                <li>Ensure the controller is physically connected</li>
                <li>Check connection settings (Device, Baud Rate)</li>
                <li>Click "Connect" to connect to the controller</li>
                <li>If the problem persists, try "Restart"</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <p>
      <em
        >כאן יוצגו נתונים של יומן פעולות</em
      >
    </p>
  </div>
</div>
{% endblock %}
